(function(){class e extends THREE.Pass{constructor(r=1,t=25,n=4,o=256){super();const s={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};this.renderTargetX=new THREE.WebGLRenderTarget(o,o,s),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new THREE.WebGLRenderTarget(o,o,s),this.renderTargetY.texture.name="BloomPass.y",void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");const i=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(i.uniforms),this.copyUniforms["opacity"].value=r,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,blending:THREE.AdditiveBlending,transparent:!0}),void 0===THREE.ConvolutionShader&&console.error("THREE.BloomPass relies on THREE.ConvolutionShader");const a=THREE.ConvolutionShader;this.convolutionUniforms=THREE.UniformsUtils.clone(a.uniforms),this.convolutionUniforms["uImageIncrement"].value=e.blurX,this.convolutionUniforms["cKernel"].value=THREE.ConvolutionShader.buildKernel(n),this.materialConvolution=new THREE.ShaderMaterial({uniforms:this.convolutionUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new THREE.FullScreenQuad(null)}render(r,t,n,o,s){s&&r.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms["tDiffuse"].value=n.texture,this.convolutionUniforms["uImageIncrement"].value=e.blurX,r.setRenderTarget(this.renderTargetX),r.clear(),this.fsQuad.render(r),this.convolutionUniforms["tDiffuse"].value=this.renderTargetX.texture,this.convolutionUniforms["uImageIncrement"].value=e.blurY,r.setRenderTarget(this.renderTargetY),r.clear(),this.fsQuad.render(r),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetY.texture,s&&r.state.buffers.stencil.setTest(!0),r.setRenderTarget(n),this.clear&&r.clear(),this.fsQuad.render(r)}}e.blurX=new THREE.Vector2(.001953125,0),e.blurY=new THREE.Vector2(0,.001953125),THREE.BloomPass=e})();