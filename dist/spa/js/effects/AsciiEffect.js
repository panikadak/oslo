(function(){class e{constructor(e,t=" .:-=+*#%@",a={}){const c=a["resolution"]?a["resolution"]:.15,o=a["scale"]?a["scale"]:1,n=!!a["color"]&&a["color"],l=!!a["alpha"]&&a["alpha"],r=!!a["block"]&&a["block"],s=!!a["invert"]&&a["invert"],i="low";let d,h;const g=document.createElement("div");g.style.cursor="default";const u=document.createElement("table");let b,p,m;function f(){b=Math.round(d*S),p=Math.round(h*S),E.width=b,E.height=p,m=e.domElement,m.style.backgroundColor&&(u.rows[0].cells[0].style.backgroundColor=m.style.backgroundColor,u.rows[0].cells[0].style.color=m.style.color),u.cellSpacing=0,u.cellPadding=0;const t=u.style;t.display="inline",t.width=Math.round(b/S*o)+"px",t.height=Math.round(p/S*o)+"px",t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=D+"px",t.fontFamily=x,t.fontSize=v+"px",t.lineHeight=z+"px",t.textAlign="left",t.textDecoration="none"}g.appendChild(u),this.setSize=function(t,a){d=t,h=a,e.setSize(t,a),f()},this.render=function(t,a){e.render(t,a),H(e,u)},this.domElement=g;const k=" .,:;i1tfLCG08@".split(""),w=" CGO08@".split(""),x="courier new, monospace",y=e.domElement,E=document.createElement("canvas");if(!E.getContext)return;const C=E.getContext("2d");if(!C.getImageData)return;let M=n?w:k;t&&(M=t);let S=.5;switch(i){case"low":S=.25;break;case"medium":S=.5;break;case"high":S=1;break}c&&(S=c);const v=2/S*o,z=2/S*o;let D=0;if("low"==i)switch(o){case 1:D=-1;break;case 2:case 3:D=-2.1;break;case 4:D=-3.1;break;case 5:D=-4.15;break}if("medium"==i)switch(o){case 1:D=0;break;case 2:D=-1;break;case 3:D=-1.04;break;case 4:case 5:D=-2.1;break}if("high"==i)switch(o){case 1:case 2:D=0;break;case 3:case 4:case 5:D=-1;break}function H(e,t){C.clearRect(0,0,b,p),C.drawImage(y,0,0,b,p);const a=C.getImageData(0,0,b,p).data;let c="";for(let o=0;o<p;o+=2){for(let e=0;e<b;e++){const t=4*(o*b+e),i=a[t],d=a[t+1],h=a[t+2],g=a[t+3];let u,p;p=(.3*i+.59*d+.11*h)/255,0==g&&(p=1),u=Math.floor((1-p)*(M.length-1)),s&&(u=M.length-u-1);let m=M[u];void 0!==m&&" "!=m||(m="&nbsp;"),c+=n?"<span style='color:rgb("+i+","+d+","+h+");"+(r?"background-color:rgb("+i+","+d+","+h+");":"")+(l?"opacity:"+g/255+";":"")+"'>"+m+"</span>":m}c+="<br/>"}t.innerHTML="<tr><td>"+c+"</td></tr>"}}}THREE.AsciiEffect=e})();