(function(){class t extends THREE.BufferGeometry{constructor(t,e,n,s){super();const r=[],i=[],u=[],p=new THREE.Vector3,l=new THREE.Matrix4;l.makeRotationFromEuler(n),l.setPosition(e);const c=new THREE.Matrix4;function a(){let o=[];const e=new THREE.Vector3,n=new THREE.Vector3;if(!0===t.geometry.isGeometry)return void console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const c=t.geometry,a=c.attributes.position,m=c.attributes.normal;if(null!==c.index){const t=c.index;for(let s=0;s<t.count;s++)e.fromBufferAttribute(a,t.getX(s)),n.fromBufferAttribute(m,t.getX(s)),h(o,e,n)}else for(let t=0;t<a.count;t++)e.fromBufferAttribute(a,t),n.fromBufferAttribute(m,t),h(o,e,n);o=f(o,p.set(1,0,0)),o=f(o,p.set(-1,0,0)),o=f(o,p.set(0,1,0)),o=f(o,p.set(0,-1,0)),o=f(o,p.set(0,0,1)),o=f(o,p.set(0,0,-1));for(let t=0;t<o.length;t++){const e=o[t];u.push(.5+e.position.x/s.x,.5+e.position.y/s.y),e.position.applyMatrix4(l),r.push(e.position.x,e.position.y,e.position.z),i.push(e.normal.x,e.normal.y,e.normal.z)}}function h(e,n,s){n.applyMatrix4(t.matrixWorld),n.applyMatrix4(c),s.transformDirection(t.matrixWorld),e.push(new o(n.clone(),s.clone()))}function f(t,o){const e=[],n=.5*Math.abs(s.dot(o));for(let s=0;s<t.length;s+=3){let r,i,u,p,l=0;const c=t[s+0].position.dot(o)-n,a=t[s+1].position.dot(o)-n,h=t[s+2].position.dot(o)-n,f=c>0,E=a>0,y=h>0;switch(l=(f?1:0)+(E?1:0)+(y?1:0),l){case 0:e.push(t[s]),e.push(t[s+1]),e.push(t[s+2]);break;case 1:if(f&&(r=t[s+1],i=t[s+2],u=m(t[s],r,o,n),p=m(t[s],i,o,n)),E){r=t[s],i=t[s+2],u=m(t[s+1],r,o,n),p=m(t[s+1],i,o,n),e.push(u),e.push(i.clone()),e.push(r.clone()),e.push(i.clone()),e.push(u.clone()),e.push(p);break}y&&(r=t[s],i=t[s+1],u=m(t[s+2],r,o,n),p=m(t[s+2],i,o,n)),e.push(r.clone()),e.push(i.clone()),e.push(u),e.push(p),e.push(u.clone()),e.push(i.clone());break;case 2:f||(r=t[s].clone(),i=m(r,t[s+1],o,n),u=m(r,t[s+2],o,n),e.push(r),e.push(i),e.push(u)),E||(r=t[s+1].clone(),i=m(r,t[s+2],o,n),u=m(r,t[s],o,n),e.push(r),e.push(i),e.push(u)),y||(r=t[s+2].clone(),i=m(r,t[s],o,n),u=m(r,t[s+1],o,n),e.push(r),e.push(i),e.push(u));break;case 3:break}}return e}function m(t,e,n,s){const r=t.position.dot(n)-s,i=e.position.dot(n)-s,u=r/(r-i),p=new o(new THREE.Vector3(t.position.x+u*(e.position.x-t.position.x),t.position.y+u*(e.position.y-t.position.y),t.position.z+u*(e.position.z-t.position.z)),new THREE.Vector3(t.normal.x+u*(e.normal.x-t.normal.x),t.normal.y+u*(e.normal.y-t.normal.y),t.normal.z+u*(e.normal.z-t.normal.z)));return p}c.copy(l).invert(),a(),this.setAttribute("position",new THREE.Float32BufferAttribute(r,3)),this.setAttribute("normal",new THREE.Float32BufferAttribute(i,3)),this.setAttribute("uv",new THREE.Float32BufferAttribute(u,2))}}class o{constructor(t,o){this.position=t,this.normal=o}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}THREE.DecalGeometry=t,THREE.DecalVertex=o})();