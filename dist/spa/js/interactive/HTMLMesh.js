(function(){class e extends THREE.Mesh{constructor(e){const n=new t(e),o=new THREE.PlaneGeometry(.001*n.image.width,.001*n.image.height),i=new THREE.MeshBasicMaterial({map:n,toneMapped:!1});function a(e){i.map.dispatchEvent(e)}super(o,i),this.addEventListener("mousedown",a),this.addEventListener("mousemove",a),this.addEventListener("mouseup",a),this.addEventListener("click",a)}}class t extends THREE.CanvasTexture{constructor(e){super(o(e)),this.dom=e,this.anisotropy=16,this.encoding=THREE.sRGBEncoding,this.minFilter=THREE.LinearFilter,this.magFilter=THREE.LinearFilter}dispatchEvent(e){i(this.dom,e.type,e.data.x,e.data.y),this.update()}update(){this.image=o(this.dom),this.needsUpdate=!0}}const n=new WeakMap;function o(e){var t=document.createRange();function o(e){var t=[],n=!1;function o(){if(n&&(n=!1,e.restore()),0!==t.length){for(var o=-1/0,i=-1/0,a=1/0,d=1/0,r=0;r<t.length;r++){var s=t[r];o=Math.max(o,s.x),i=Math.max(i,s.y),a=Math.min(a,s.x+s.width),d=Math.min(d,s.y+s.height)}e.save(),e.beginPath(),e.rect(o,i,a-o,d-i),e.clip(),n=!0}}return{add:function(e){t.push(e),o()},remove:function(){t.pop(),o()}}}function i(e,t,n,o){""!==o&&("uppercase"===e.textTransform&&(o=o.toUpperCase()),h.font=e.fontSize+" "+e.fontFamily,h.textBaseline="top",h.fillStyle=e.color,h.fillText(o,t,n))}function a(e,t,n,o,i,a){var d=e[t+"Width"],r=e[t+"Style"],s=e[t+"Color"];"0px"!==d&&"none"!==r&&"transparent"!==s&&"rgba(0, 0, 0, 0)"!==s&&(h.strokeStyle=s,h.beginPath(),h.moveTo(n,o),h.lineTo(n+i,o+a),h.stroke())}function d(e,n){var o=0,s=0,c=0,p=0;if(3===e.nodeType){t.selectNode(e);var f=t.getBoundingClientRect();o=f.left-r.left-.5,s=f.top-r.top-.5,c=f.width,p=f.height,i(n,o,s,e.nodeValue.trim())}else{if("none"===e.style.display)return;f=e.getBoundingClientRect();o=f.left-r.left-.5,s=f.top-r.top-.5,c=f.width,p=f.height,n=window.getComputedStyle(e);var u=n.backgroundColor;"transparent"!==u&&"rgba(0, 0, 0, 0)"!==u&&(h.fillStyle=u,h.fillRect(o,s,c,p)),a(n,"borderTop",o,s,c,0),a(n,"borderLeft",o,s,0,p),a(n,"borderBottom",o,s+p,c,0),a(n,"borderRight",o+c,s,0,p),"color"!==e.type&&"text"!==e.type||(l.add({x:o,y:s,width:c,height:p}),i(n,o+parseInt(n.paddingLeft),s+parseInt(n.paddingTop),e.value),l.remove())}var g="auto"===n.overflow||"hidden"===n.overflow;g&&l.add({x:o,y:s,width:c,height:p});for(var m=0;m<e.childNodes.length;m++)d(e.childNodes[m],n);g&&l.remove()}const r=e.getBoundingClientRect();let s;n.has(e)?s=n.get(e):(s=document.createElement("canvas"),s.width=r.width,s.height=r.height);const h=s.getContext("2d"),l=new o(h);return d(e),s}function i(e,t,n,o){const i={clientX:n*e.offsetWidth+e.offsetLeft,clientY:o*e.offsetHeight+e.offsetTop,view:e.ownerDocument.defaultView};window.dispatchEvent(new MouseEvent(t,i));const a=e.getBoundingClientRect();function d(e){if(3!==e.nodeType){const r=e.getBoundingClientRect();n>r.left&&n<r.right&&o>r.top&&o<r.bottom&&e.dispatchEvent(new MouseEvent(t,i));for(var a=0;a<e.childNodes.length;a++)d(e.childNodes[a])}}n=n*a.width+a.left,o=o*a.height+a.top,d(e)}THREE.HTMLMesh=e})();