(function(){class e extends THREE.Loader{constructor(e){super(e),this.reversed=!1}load(e,t,n,o){const s=this,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(s.parse(n))}catch(a){o?o(a):console.error(a),s.manager.itemError(e)}}),n,o)}parse(e){function t(e,t){const o=Math.round,s={},a=1e5/(72*(e.unitsPerEm||2048)),r=e.encoding.cmap.glyphIndexMap,i=Object.keys(r);for(let d=0;d<i.length;d++){const y=i[d],h=e.glyphs.glyphs[r[y]];if(void 0!==y){const e={ha:o(h.advanceWidth*a),x_min:o(h.xMin*a),x_max:o(h.xMax*a),o:""};t&&(h.path.commands=n(h.path.commands)),h.path.commands.forEach((function(t){"c"===t.type.toLowerCase()&&(t.type="b"),e.o+=t.type.toLowerCase()+" ",void 0!==t.x&&void 0!==t.y&&(e.o+=o(t.x*a)+" "+o(t.y*a)+" "),void 0!==t.x1&&void 0!==t.y1&&(e.o+=o(t.x1*a)+" "+o(t.y1*a)+" "),void 0!==t.x2&&void 0!==t.y2&&(e.o+=o(t.x2*a)+" "+o(t.y2*a)+" ")})),s[String.fromCodePoint(h.unicode)]=e}}return{glyphs:s,familyName:e.getEnglishName("fullName"),ascender:o(e.ascender*a),descender:o(e.descender*a),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}function n(e){const t=[];let n;e.forEach((function(e){"m"===e.type.toLowerCase()?(n=[e],t.push(n)):"z"!==e.type.toLowerCase()&&n.push(e)}));const o=[];return t.forEach((function(e){const t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};o.push(t);for(let n=e.length-1;n>0;n--){const t=e[n],s={type:t.type};void 0!==t.x2&&void 0!==t.y2?(s.x1=t.x2,s.y1=t.y2,s.x2=t.x1,s.y2=t.y1):void 0!==t.x1&&void 0!==t.y1&&(s.x1=t.x1,s.y1=t.y1),s.x=e[n-1].x,s.y=e[n-1].y,o.push(s)}})),o}return"undefined"===typeof opentype?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):t(opentype.parse(e),this.reversed)}}THREE.TTFLoader=e})();