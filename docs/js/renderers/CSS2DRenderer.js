(function(){class e extends THREE.Object3D{constructor(e=document.createElement("div")){super(),this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}e.prototype.isCSS2DObject=!0;const t=new THREE.Vector3,n=new THREE.Matrix4,r=new THREE.Matrix4,o=new THREE.Vector3,i=new THREE.Vector3;class s{constructor(e={}){const s=this;let a,l,c,d;const u={objects:new WeakMap},m=void 0!==e.element?e.element:document.createElement("div");function p(e,n,o){if(e.isCSS2DObject){e.onBeforeRender(s,n,o),t.setFromMatrixPosition(e.matrixWorld),t.applyMatrix4(r);const i=e.element;/apple/i.test(navigator.vendor)?i.style.transform="translate(-50%,-50%) translate("+Math.round(t.x*c+c)+"px,"+Math.round(-t.y*d+d)+"px)":i.style.transform="translate(-50%,-50%) translate("+(t.x*c+c)+"px,"+(-t.y*d+d)+"px)",i.style.display=e.visible&&t.z>=-1&&t.z<=1?"":"none";const a={distanceToCameraSquared:h(o,e)};u.objects.set(e,a),i.parentNode!==m&&m.appendChild(i),e.onAfterRender(s,n,o)}for(let t=0,r=e.children.length;t<r;t++)p(e.children[t],n,o)}function h(e,t){return o.setFromMatrixPosition(e.matrixWorld),i.setFromMatrixPosition(t.matrixWorld),o.distanceToSquared(i)}function x(e){const t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}function f(e){const t=x(e).sort((function(e,t){const n=u.objects.get(e).distanceToCameraSquared,r=u.objects.get(t).distanceToCameraSquared;return n-r})),n=t.length;for(let r=0,o=t.length;r<o;r++)t[r].element.style.zIndex=n-r}m.style.overflow="hidden",this.domElement=m,this.getSize=function(){return{width:a,height:l}},this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),n.copy(t.matrixWorldInverse),r.multiplyMatrices(t.projectionMatrix,n),p(e,e,t),f(e)},this.setSize=function(e,t){a=e,l=t,c=a/2,d=l/2,m.style.width=e+"px",m.style.height=t+"px"}}}THREE.CSS2DObject=e,THREE.CSS2DRenderer=s})();