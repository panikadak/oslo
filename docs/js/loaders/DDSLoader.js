(function(){class r extends THREE.CompressedTextureLoader{constructor(r){super(r)}parse(r,t){const e={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},a=542327876,o=131072,n=512,s=1024,m=2048,c=4096,i=8192,u=16384,p=32768,h=4;function d(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function E(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)}function C(r,t,e,a){const o=e*a*4,n=new Uint8Array(r,t,o),s=new Uint8Array(o);let m=0,c=0;for(let i=0;i<a;i++)for(let r=0;r<e;r++){const r=n[c];c++;const t=n[c];c++;const e=n[c];c++;const a=n[c];c++,s[m]=e,m++,s[m]=t,m++,s[m]=r,m++,s[m]=a,m++}return s}const T=d("DXT1"),f=d("DXT3"),l=d("DXT5"),D=d("ETC1"),R=31,A=0,H=1,_=2,S=3,b=4,w=7,g=20,x=21,F=22,L=23,X=24,B=25,G=26,M=28,U=new Int32Array(r,0,R);if(U[A]!==a)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),e;if(!U[g]&h)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),e;let k;const y=U[x];let I=!1;switch(y){case T:k=8,e.format=THREE.RGB_S3TC_DXT1_Format;break;case f:k=16,e.format=THREE.RGBA_S3TC_DXT3_Format;break;case l:k=16,e.format=THREE.RGBA_S3TC_DXT5_Format;break;case D:k=8,e.format=THREE.RGB_ETC1_Format;break;default:if(!(32===U[F]&&16711680&U[L]&&65280&U[X]&&255&U[B]&&4278190080&U[G]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",E(y)),e;I=!0,k=64,e.format=THREE.RGBAFormat}e.mipmapCount=1,U[_]&o&&!1!==t&&(e.mipmapCount=Math.max(1,U[w]));const v=U[M];if(e.isCubemap=!!(v&n),e.isCubemap&&(!(v&s)||!(v&m)||!(v&c)||!(v&i)||!(v&u)||!(v&p)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),e;e.width=U[b],e.height=U[S];let j=U[H]+4;const q=e.isCubemap?6:1;for(let z=0;z<q;z++){let t=e.width,a=e.height;for(let o=0;o<e.mipmapCount;o++){let o,n;I?(o=C(r,j,t,a),n=o.length):(n=Math.max(4,t)/4*Math.max(4,a)/4*k,o=new Uint8Array(r,j,n));const s={data:o,width:t,height:a};e.mipmaps.push(s),j+=n,t=Math.max(t>>1,1),a=Math.max(a>>1,1)}}return e}}THREE.DDSLoader=r})();