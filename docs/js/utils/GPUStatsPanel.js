(function(){class e extends Stats.Panel{constructor(e,t="GPU MS"){super(t,"#f90","#210");let n=!0,i=e.getExtension("EXT_disjoint_timer_query_webgl2");null===i&&(n=!1,i=e.getExtension("EXT_disjoint_timer_query"),null===i&&console.warn("GPUStatsPanel: disjoint_time_query extension not available.")),this.context=e,this.extension=i,this.maxTime=30,this.activeQueries=0,this.startQuery=function(){const e=this.context,t=this.extension;if(null===t)return;let i;n?(i=e.createQuery(),e.beginQuery(t.TIME_ELAPSED_EXT,i)):(i=t.createQueryEXT(),t.beginQueryEXT(t.TIME_ELAPSED_EXT,i)),this.activeQueries++;const s=()=>{let r,E,a;n?(r=e.getQueryParameter(i,e.QUERY_RESULT_AVAILABLE),E=e.getParameter(t.GPU_DISJOINT_EXT),a=e.getQueryParameter(i,e.QUERY_RESULT)):(r=t.getQueryObjectEXT(i,t.QUERY_RESULT_AVAILABLE_EXT),E=e.getParameter(t.GPU_DISJOINT_EXT),a=t.getQueryObjectEXT(i,t.QUERY_RESULT_EXT));const u=1e-6*a;r?(E||this.update(u,this.maxTime),this.activeQueries--):requestAnimationFrame(s)};requestAnimationFrame(s)},this.endQuery=function(){const e=this.extension,t=this.context;null!==e&&(n?t.endQuery(e.TIME_ELAPSED_EXT):e.endQueryEXT(e.TIME_ELAPSED_EXT))}}}THREE.GPUStatsPanel=e})();