(function(){const e=new THREE.Vector2,t={type:"",data:e};class n extends THREE.Group{constructor(n,s){super();const o=this,r=new THREE.Raycaster,i=new THREE.Matrix4,d=n.domElement;function c(n){n.stopPropagation(),e.x=n.clientX/d.clientWidth*2-1,e.y=-n.clientY/d.clientHeight*2+1,r.setFromCamera(e,s);const i=r.intersectObjects(o.children,!1);if(i.length>0){const e=i[0],s=e.object,o=e.uv;t.type=n.type,t.data.set(o.x,1-o.y),s.dispatchEvent(t)}}d.addEventListener("pointerdown",c),d.addEventListener("pointerup",c),d.addEventListener("pointermove",c),d.addEventListener("mousedown",c),d.addEventListener("mouseup",c),d.addEventListener("mousemove",c),d.addEventListener("click",c);const a={move:"mousemove",select:"click",selectstart:"mousedown",selectend:"mouseup"};function l(e){const n=e.target;i.identity().extractRotation(n.matrixWorld),r.ray.origin.setFromMatrixPosition(n.matrixWorld),r.ray.direction.set(0,0,-1).applyMatrix4(i);const s=r.intersectObjects(o.children,!1);if(s.length>0){const n=s[0],o=n.object,r=n.uv;t.type=a[e.type],t.data.set(r.x,1-r.y),o.dispatchEvent(t)}}const E=n.xr.getController(0);E.addEventListener("move",l),E.addEventListener("select",l),E.addEventListener("selectstart",l),E.addEventListener("selectend",l);const v=n.xr.getController(1);v.addEventListener("move",l),v.addEventListener("select",l),v.addEventListener("selectstart",l),v.addEventListener("selectend",l)}}THREE.InteractiveGroup=n})();