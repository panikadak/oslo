(function(){const e=new THREE.Plane,t=new THREE.Raycaster,n=new THREE.Vector2,o=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Matrix4;class a extends THREE.EventDispatcher{constructor(a,c,l){super(),l.style.touchAction="none";let p=null,u=null;const d=[],E=this;function v(){l.addEventListener("pointermove",b),l.addEventListener("pointerdown",g),l.addEventListener("pointerup",R),l.addEventListener("pointerleave",R)}function m(){l.removeEventListener("pointermove",b),l.removeEventListener("pointerdown",g),l.removeEventListener("pointerup",R),l.removeEventListener("pointerleave",R),l.style.cursor=""}function h(){m()}function y(){return a}function f(){return t}function b(v){if(!1!==E.enabled){if(j(v),t.setFromCamera(n,c),p)return t.ray.intersectPlane(e,r)&&p.position.copy(r.sub(o).applyMatrix4(s)),void E.dispatchEvent({type:"drag",object:p});if("mouse"===v.pointerType||"pen"===v.pointerType)if(d.length=0,t.setFromCamera(n,c),t.intersectObjects(a,!0,d),d.length>0){const t=d[0].object;e.setFromNormalAndCoplanarPoint(c.getWorldDirection(e.normal),i.setFromMatrixPosition(t.matrixWorld)),u!==t&&null!==u&&(E.dispatchEvent({type:"hoveroff",object:u}),l.style.cursor="auto",u=null),u!==t&&(E.dispatchEvent({type:"hoveron",object:t}),l.style.cursor="pointer",u=t)}else null!==u&&(E.dispatchEvent({type:"hoveroff",object:u}),l.style.cursor="auto",u=null)}}function g(u){!1!==E.enabled&&(j(u),d.length=0,t.setFromCamera(n,c),t.intersectObjects(a,!0,d),d.length>0&&(p=!0===E.transformGroup?a[0]:d[0].object,e.setFromNormalAndCoplanarPoint(c.getWorldDirection(e.normal),i.setFromMatrixPosition(p.matrixWorld)),t.ray.intersectPlane(e,r)&&(s.copy(p.parent.matrixWorld).invert(),o.copy(r).sub(i.setFromMatrixPosition(p.matrixWorld))),l.style.cursor="move",E.dispatchEvent({type:"dragstart",object:p})))}function R(){!1!==E.enabled&&(p&&(E.dispatchEvent({type:"dragend",object:p}),p=null),l.style.cursor=u?"pointer":"auto")}function j(e){const t=l.getBoundingClientRect();n.x=(e.clientX-t.left)/t.width*2-1,n.y=-(e.clientY-t.top)/t.height*2+1}v(),this.enabled=!0,this.transformGroup=!1,this.activate=v,this.deactivate=m,this.dispose=h,this.getObjects=y,this.getRaycaster=f}}THREE.DragControls=a})();